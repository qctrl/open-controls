name: Push workflow

on:
  push:
    branches:
      - "**"
    tags-ignore:
      - "*.*"

jobs:

  pre_checks:
    uses: qctrl/reusable-workflows/.github/workflows/python-pre-checks.yaml@master
    secrets: inherit

  pytest:
    uses: qctrl/reusable-workflows/.github/workflows/pytest.yaml@master
    secrets: inherit
    with:
      python-versions: '["3.9", "3.10", "3.11"]'

  publish:
    uses: qctrl/reusable-workflows/.github/workflows/python-publish-internally.yaml@master
    secrets: inherit
